# 11ì¥ ì •ë¦¬

ì½”ë“œì˜ ëƒ„ìƒˆë¥¼ ë§¡ê³ , ì½œë°±í•¨ìˆ˜, ìµëª…í•¨ìˆ˜, ê³ ì°¨í•¨ìˆ˜, ì¼ê¸‰í•¨ìˆ˜ ë“±ì„ í†µí•´ì„œ ë¦¬íŒ©í„°ë§í•˜ëŠ” ë°©ë²•ì„ ë°°ì› ìŠµë‹ˆë‹¤!

## ğŸ˜ ë°°ì—´ì— ëŒ€í•œ ì¹´í”¼-ì˜¨-ë¼ì´íŠ¸ ë¦¬íŒ©í„°ë§

ìì„¸íˆ ë³´ë©´ arraySetê³¼ pushê°€ ë¹„ìŠ·í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 10ì¥ì—ì„œ ë´¤ë˜ ê²ƒë“¤ì´ ë– ì˜¤ë¥´ëŠ”êµ°ìš”..

**ğŸ”¥ ê·¸ì „ì— ë‹¤ì‹œ! ì¹´í”¼-ì˜¨-ë¼ì´íŠ¸ ì›ì¹™!**
ì›ë³¸ ë°ì´í„°ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•Šê³ , ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ ìˆ˜ì •í•œ í›„ ë°˜í™˜

```javascript
// ë‚˜ìœ ì˜ˆ: ì›ë³¸ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì • (mutating)
function addItem(cart, item) {
  cart.push(item); // ì›ë³¸ì´ ë³€ê²½ë¨
  return cart;
}

// ì¢‹ì€ ì˜ˆ: ì¹´í”¼-ì˜¨-ë¼ì´íŠ¸
function addItem(cart, item) {
  var newCart = cart.slice(); // ë³µì‚¬ë³¸ ìƒì„±
  newCart.push(item); // ë³µì‚¬ë³¸ ìˆ˜ì •
  return newCart; // ìƒˆë¡œìš´ ë°°ì—´ ë°˜í™˜
}
```

**ì¹´í”¼-ì˜¨-ë¼ì´íŠ¸ì˜ 3ë‹¨ê³„ ê³¼ì •**

ë³µì‚¬í•˜ê¸°: ì›ë³¸ ë°ì´í„°ì˜ ë³µì‚¬ë³¸ì„ ë§Œë“ ë‹¤ </br>
ìˆ˜ì •í•˜ê¸°: ë³µì‚¬ë³¸ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ìˆ˜ì •í•œë‹¤ </br>
ë°˜í™˜í•˜ê¸°: ìˆ˜ì •ëœ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•œë‹¤

**ì¥ì **

ë¶ˆë³€ì„± ë³´ì¥: ì›ë³¸ ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šì•„ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì½”ë“œ </br>
ì•ˆì „í•œ ê³µìœ : ì—¬ëŸ¬ ê³³ì—ì„œ ê°™ì€ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì°¸ì¡° ê°€ëŠ¥ </br>
ë””ë²„ê¹… ìš©ì´: ë°ì´í„° ë³€ê²½ ì¶”ì ì´ ì‰¬ì›€ </br>
í…ŒìŠ¤íŠ¸ ìš©ì´: ë¶€ì‘ìš©ì´ ì—†ì–´ í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ì›€

ê·¸ëŸ¼ ì´ì œ ë³µìŠµë„ í–ˆìœ¼ë‹ˆ ë‹¤ì‹œ ê°€ë´…ì‹œë‹¤!

### 1. ë³¸ë¬¸ê³¼ ì•ë¶€ë¶„, ë’·ë¶€ë¶„ì„ í™•ì¸í•˜ê¸°

```javascript
function arraySet(array, idx, value) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}

function push(array, elem) {
  var copy = array.slice();
  copy.push(elem);
  return copy;
}

function drop_last(array) {
  var array_copy = array.slice();
  array_copy.pop();
  return array_copy;
}

function drop_first(array) {
  var array_copy = array.slice();
  array_copy.shift();
  return array_copy;
}
```

### 2. í•¨ìˆ˜ ë¹¼ë‚´ê¸°

```javascript
// ì›ë˜ ì½”ë“œ
function arraySet(array, idx, value) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}

// í•¨ìˆ˜ë¡œ ë¹¼ë‚¸ ì½”ë“œ
function arraySet(array, idx, value) {
  return withArrayCopy(array);
}

function withArrayCopy(array) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}
```

idxì™€ Valueê°€ WithArrayCopy() í•¨ìˆ˜ ë²”ìœ„ ì•ˆì— ì—†ê¸° ë•Œë¬¸ì— ë³¸ë¬¸ì„ ì½œë°±í•¨ìˆ˜ë¡œ ë¹¼ì•¼í•©ë‹ˆë‹¤.

```javascript
function arraySet(array, idx, value) {
  return withArrayCopy(array);
}

function withArrayCopy(array) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}
// ì´ ì½”ë“œì—ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. withArrayCopy í•¨ìˆ˜ì—ì„œ idxì™€ valueë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
// ì˜¬ë°”ë¥¸ ë¦¬íŒ©í„°ë§:
function arraySet(array, idx, value) {
  return withArrayCopy(array, function (copy) {
    copy[idx] = value;
  });
}

function withArrayCopy(array, modify) {
  var copy = array.slice();
  modify(copy);
  return copy;
}
```

### 3. ì½œë°± ë¹¼ë‚´ê¸°

```javascript
// ì›ë˜ ì½”ë“œ
function arraySet(array, idx, value) {
  return withArrayCopy(array, function (copy) {
    copy[idx] = value;
  });
}

function withArrayCopy(array) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}

// ì½œë°±ìœ¼ë¡œ ë¹¼ë‚¸ ì½”ë“œ
function arraySet(array, idx, value) {
  return withArrayCopy(array, function (copy) {
    copy[idx] = value;
  });
}

function withArrayCopy(array, modify) {
  var copy = array.slice();
  modify(copy);
  return copy;
}
```

### ë¦¬íŒ©í„°ë§ ì „í›„

```javascript
//ì „
function arraySet(array, idx, value) {
  var copy = array.slice();
  copy[idx] = value;
  return copy;
}

//í›„
function arraySet(array, idx, value) {
  return withArrayCopy(array, function (copy) {
    copy[idx] = value;
  });
}

function withArrayCopy(array, modify) {
  var copy = array.slice();
  modify(copy);
  return copy;
}
```

ì¤‘ë³µì„ ì—†ì• ë©´ ì½”ë“œê°€ ì§§ì•„ì§€ëŠ” ê²½ìš°ê°€ ìˆì§€ë§Œ, ì´ ê²½ìš°ëŠ” ì•„ë‹™ë‹ˆë‹¤. ê·¸ë˜ë„ ì´ì œëŠ” ë˜‘ê°™ì€ ì½”ë“œë¥¼ ë˜ ë§Œë“¤ì§€ ì•Šì•„ë„ë˜ê³ , ìµœì í™”ë¥¼ ìœ„í•´ ë³µì‚¬ë³¸ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ ì“¸ ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤!

## ğŸƒâ€â™‚ï¸ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜

### ë¬¸ì œ: ì¤‘ë³µë˜ëŠ” try/catch íŒ¨í„´

ì§€ê¸ˆê¹Œì§€ëŠ” ë§¤ìš° ë¹„ìŠ·í•˜ì§€ ì•Šì€ í•¨ìˆ˜ ë‘ ê°œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ë‘ í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ ì ì´ ìˆì§€ë§Œ ë§ì€ ë¶€ë¶„ì´ ì¤‘ë³µë©ë‹ˆë‹¤.

```javascript
function saveUserDataWithLogging(user) {
  try {
    saveUserDataNoLogging(user);
  } catch (error) {
    logToSnapErrors(error);
  }
}

function fetchProductWithLogging(productId) {
  try {
    fetchProductNoLogging(productId);
  } catch (error) {
    logToSnapErrors(error);
  }
}
```

### í•´ê²°ì±… 1: í•¨ìˆ˜ ì´ë¦„ì— ìˆëŠ” ì•”ë¬µì  ì¸ì ë“œëŸ¬ë‚´ê¸°

ë¨¼ì € ì´ í•¨ìˆ˜ì— ì´ë¦„ì´ ì•”ë¬µì  ì¸ìë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤. ì´ë¦„ì„ ì—†ì• ê³  ì´ë ‡ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

1ë‹¨ê³„: ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œ ë§Œë“¤ê¸°

```javascript
function(arg) {
  try {
    saveUserDataNoLogging(arg);
  } catch (error) {
    logToSnapErrors(error);
  }
}

function(arg) {
  try {
    fetchProductNoLogging(arg);
  } catch (error) {
    logToSnapErrors(error);
  }
}
```

### 2ë‹¨ê³„: ë³¸ë¬¸ì„ ì½œë°±ìœ¼ë¡œ ë°”ê¾¸ê¸° (Replace body with callback)

ì•”ë¬µì ê³¼ ë³¸ë¬¸, ì²«ë²ˆì§¸ì´ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚©ë‹ˆë‹¤. ì´ì œ í•¨ìˆ˜ ë³¸ë¬¸ì„ ì½œë°±ìœ¼ë¡œ ë°”ê¾¸ê¸° ë¦¬íŒ©í„°ë§ì„ ì ìš©í•´ ë´…ì‹œë‹¤.

```javascript
function wrapLogging(f) {
  return function (arg) {
    try {
      f(arg);
    } catch (error) {
      logToSnapErrors(error);
    }
  };
}
```

### ì‚¬ìš©ë²•

ì´ì œ wrapLogging() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ê¸°ì¡´ í•¨ìˆ˜ë“¤ì„ ë‹¤ì‹œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```javascript
var saveUserDataWithLogging = wrapLogging(saveUserDataNoLogging);

var fetchProductWithLogging = wrapLogging(fetchProductNoLogging);
wrapLogging í•¨ìˆ˜ì˜ ë™ì‘ ê³¼ì •

```

í•¨ìˆ˜ë¥¼ ë°›ì•„ì„œ - wrapLogging(f)ëŠ” í•¨ìˆ˜ fë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤
ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë¦¬í„´ - return function(arg) { ... }
try/catchë¡œ ê°ì‹¸ì„œ ì‹¤í–‰ - ì›ë³¸ í•¨ìˆ˜ë¥¼ try/catch êµ¬ë¬¸ìœ¼ë¡œ ê°ì‹¸ì„œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰
ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ë¡œê¹… - catch ë¸”ë¡ì—ì„œ logToSnapErrors(error) í˜¸ì¶œ

## ìš”ì  ì •ë¦¬

- ê³ ì°¨ í•¨ìˆ˜ë¡œ íŒ¨í„´ì´ë‚˜ ì›ì¹™ì„ ì½”ë“œë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì–¸ì–´ì˜ ìˆ˜ì¤€ì—ì„œë§Œ í•´ì•¼ í•©ë‹ˆë‹¤. ê³ ì°¨ í•¨ìˆ˜ëŠ” í•œë²ˆ ì •ì˜í•˜ë©´ í•„ìš”í•œ ê³³ì— ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ê³ ì°¨ í•¨ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬í„´ ë°›ì€ í•¨ìˆ˜ëŠ” ë³€ìˆ˜ì— í• ë‹¹í•´ì„œ ì´ë¦„ì´ ìˆëŠ” ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ìƒëŠ” ê²ƒë„ ìˆìŠµë‹ˆë‹¤. ê³ ì°¨ í•¨ìˆ˜ëŠ” ë§ì€ ì¤‘ë³µ ì½”ë“œë¥¼ ì—†ì•¨ ìˆ˜ ìˆì–´ ê°€ë…ì„±ì„ í•´ê²°í• ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ ìµí˜€ì„œ ì ì ˆí•œ ê³³ì— ì¨ì•¼ í•©ë‹ˆë‹¤.

## ê°œì¸ì ì¸ ëŠë‚Œ

ê³ ì°¨í•¨ìˆ˜ë¥¼ í™œìš©í•´ì„œ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ê³  ê·¸ì— ë”°ë¼ ì¤‘ë³µì„ ì œê±°í•´ ì—¬ëŸ¬ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì„ í™œìš©í•˜ë©´ ë” ì¢‹ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤! í•˜ì§€ë§Œ ë„ˆë¬´ ì¢‹ë‹¤ê³  ë‚¨ë°œí•˜ê±°ë‚˜, ì§ê´€ì ì´ì§€ ëª»í•œ ê²½ìš°ì— ì“´ë‹¤ë©´ .. ê·¸ì— ë”°ë¥¸ ë¦¬ìŠ¤í¬ëŠ” .. ë³¸ì¸ì´ ì§€ëŠ”ê±°ê² ì£ ?!
ìµœëŒ€í•œ ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•œ ê²½ìš°ì—ë§Œ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤.
